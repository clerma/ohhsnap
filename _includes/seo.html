{%- assign title_separator = site.title_separator | default: '|' -%}
{%- if page.title -%}{%- assign seo_title = page.title | append: " " | append: title_separator | append: " " | append: site.name -%}{%- else -%}{%- assign seo_title = site.name -%}{%- endif -%}

{%- assign canonical_url = page.canonical_url | default: page.url | absolute_url -%}
{%- if page.description -%}{%- assign seo_description = page.description -%}{%- elsif page.excerpt -%}{%- assign seo_description = page.excerpt -%}{%- else -%}{%- assign seo_description = site.description -%}{%- endif -%}

{%- assign seo_keywords = page.keywords | default: site.keywords -%}
{%- comment -%} Normalize arrays â†’ comma-separated strings {%- endcomment -%}
{%- assign lk_list = site.local_keywords | join: ', ' -%}
{%- assign lc_list = site.local_competitors | join: ', ' -%}

{%- assign seo_list = '' -%}
{%- if seo_keywords and seo_keywords != '' -%}
  {%- assign seo_list = seo_keywords -%}
{%- endif -%}

{%- if lk_list and lk_list != '' -%}
  {%- if seo_list != '' -%}{% assign seo_list = seo_list | append: ', ' %}{%- endif -%}
  {%- assign seo_list = seo_list | append: lk_list -%}
{%- endif -%}

{%- if lc_list and lc_list != '' -%}
  {%- if seo_list != '' -%}{% assign seo_list = seo_list | append: ', ' %}{%- endif -%}
  {%- assign seo_list = seo_list | append: lc_list -%}
{%- endif -%}

{%- assign seo_keywords = seo_list -%}
{%- assign page_image = page.image | default: site.og_image | absolute_url -%}
{%- assign og_type = page.date | default: "website" -%}

<title>{{ seo_title }}</title>
{% if page.nofollow == 'true' %}<meta name="robots" content="noindex" />{% else %}<meta name="robots" content="index, follow" />{% endif %}
<link rel="canonical" href="{{ canonical_url }}">

<!-- Meta Tags -->
<meta name="description" content="{{ seo_description }}">
<meta name="keywords" content="{{ seo_keywords }}">
<meta name="author" content="{{ site.author }}">

<!-- Open Graph -->
<meta property="og:type" content="{{ og_type }}">
<meta property="og:locale" content="{{ site.locale | default: 'en_US' }}">
<meta property="og:site_name" content="{{ site.name }}">
<meta property="og:title" content="{{ seo_title }}">
<meta property="og:description" content="{{ seo_description }}">
<meta property="og:url" content="{{ canonical_url }}">
<meta property="og:image" content="{{ page_image }}">
<meta property="og:image:width" content="1500">
<meta property="og:image:height" content="1000">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@{{ site.twitter.username }}">
<meta name="twitter:title" content="{{ seo_title }}">
<meta name="twitter:description" content="{{ seo_description }}">
<meta name="twitter:image" content="{{ page_image }}">

<!-- Social Links -->
{% for link in site.social.links %}<meta property="og:see_also" content="{{ link }}">{% endfor %}
{% if page.layout == "post" %}<script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"{{ canonical_url }}"},"headline":"{{ page.title }}","description":"{{ seo_description }}","image":"{{ page.image | default: site.og_image | absolute_url }}","author":{"@type":"Person","name":"{{ page.author | default: site.author }}"},"publisher":{"@type":"Organization","name":"{{ site.name }}","logo":{"@type":"ImageObject","url":"{{ site.logo | absolute_url }}"}},"datePublished":"{{ page.date | date: '%Y-%m-%d' }}","dateModified":"{{ page.last_modified_at | default: page.date | date: '%Y-%m-%d' }}"}</script>{% else %}<script type="application/ld+json">{"@context":"https://schema.org","@type":"LocalBusiness","name":"{{ site.name }}","image":"{{ page_image }}","url":"{{ canonical_url }}","telephone":"{{ site.phone }}","email":"{{ site.email }}","address":{"@type":"PostalAddress","streetAddress":"{{ site.address.street }}","addressLocality":"{{ site.address.city }}","addressRegion":"{{ site.address.region }}","postalCode":"{{ site.address.zip }}","addressCountry":"{{ site.address.country }}"},"geo":{"@type":"GeoCoordinates","latitude":{{ site.latitude }},"longitude":{{ site.longitude }}}, "openingHoursSpecification":[{"@type":"OpeningHoursSpecification","dayOfWeek":["Monday","Tuesday","Wednesday","Thursday","Friday"],"opens":"09:00","closes":"17:00"},{"@type":"OpeningHoursSpecification","dayOfWeek":["Saturday","Sunday"],"opens":"10:00","closes":"17:00"}],"priceRange":"{{ site.price_range | default: '$$' }}","paymentAccepted":["Cash","Credit Card","PayPal","Check"],"sameAs":[{% for link in site.social.links %}"{{ link }}"{% unless forloop.last %},{% endunless %}{% endfor %}],"aggregateRating":{"@type":"AggregateRating","ratingValue":"5.0","reviewCount":"{{ site.review_count | default: 50 }}","bestRating":5,"worstRating":0},"review":[{% for testimonial in site.data.testimonial %}{"@type":"Review","datePublished":"{{ testimonial.date | default: '2024-12-04' }}","description":"{{ testimonial.testimony | strip_newlines | replace: '\"','' | replace: \"'\",\"\" | escape }}","author":{"@type":"Person","name":"{{ testimonial.name | escape }}"}}{% unless forloop.last %},{% endunless %}{% endfor %}],"hasOfferCatalog":{"@type":"OfferCatalog","name":"Photo Booth Services","itemListElement":[{% assign collection = nil %}{% if page.layout == "wedding" %}{% assign collection = site.wedding %}{% elsif page.layout == "event_type" %}{% assign collection = site.event_type %}{% elsif page.layout == "booth" or page.layout == "default" %}{% assign collection = site.booths %}{% endif %}{% if collection %}{% for item in collection %}{"@type":"Offer","itemOffered":{"@type":"Service","name":"{{ item.title | escape }}","description":"{{ item.description | strip_html | strip_newlines | escape }}"}}{% unless forloop.last %},{% endunless %}{% endfor %}{% endif %}]}}</script>{% endif %}
<!-- Verification -->
{% if site.google_site_verification %}<meta name="google-site-verification" content="{{ site.google_site_verification }}">{% endif %}
{% if site.bing_site_verification %}<meta name="msvalidate.01" content="{{ site.bing_site_verification }}">{% endif %}
<meta name="p:domain_verify" content="f97ad618eec84c888b80593b09758148"/>
